<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Report Performance Website</title>
    <% if @__asset('report.css') :%>
      <link rel="stylesheet" href="<%= @__asset('report.css') %>">
    <% end %>
  </head>
  <body>
    <nav class="navbar">
      <div class="navbar-content">
        <a href="/">Media Network</a> - Report for <a href="<%= @report.url %>"><%= @report.url %></a> - <%= @report.createdAt.toISOString() %>
      </div>
    </nav>
    <div class="wrapper">
      <% if @report.finish :%>
        <div class="report">
          <div class="split left">
            <p id="content-origin" class="metric-title">Original</p>
            <div class="table-report">
              <table class="metric">
                <thead>
                  <tr>
                    <th>Metric</th>
                    <th>Value</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Time To First Byte</td>
                    <td id="request-origin">
                      <%= @prettyMs(@report.desktop.original.timeToFirstByte) %>
                    </td>
                  </tr>
                  <tr>
                    <td>Request</td>
                    <td id="response-origin">
                      <%= @prettyMs(@report.desktop.original.request) %>
                    </td>
                  </tr>
                  <tr>
                    <td>Response</td>
                    <td id="response-origin">
                      <%= @prettyMs(@report.desktop.original.response) %>
                    </td>
                  </tr>
                  <tr>
                    <td>Processing</td>
                    <td id="response-origin">
                      <%= @prettyMs(@report.desktop.original.processing) %>
                    </td>
                  </tr>
                  <tr>
                    <td>Load Time</td>
                    <td id="fullTimeLoad-origin">
                      <%= @prettyMs(@report.desktop.original.loadTime) %>
                    </td>
                  </tr>
                  <tr>
                    <td>Page Size</td>
                    <td id="originPageSize">
                      <%= @prettyBytes(@report.desktop.original.downloadedBytes) %>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="screenshot">
              <img src="/screenshots/<%= @report.identifier %>-original.jpeg">
            </div>
          </div>
          <div class="split right">
            <p id="content-optimized" class="metric-title">Optimized</p>
            <div class="table-report">
              <table class="metric">
                <thead>
                  <tr>
                    <th>Metric</th>
                    <th>Value</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Time To First Byte</td>
                    <td id="request-optimized">
                      <%= @prettyMs(@report.desktop.optimized.timeToFirstByte) %>
                    </td>
                  </tr>
                  <tr>
                    <td>Request</td>
                    <td id="response-optimized">
                      <%= @prettyMs(@report.desktop.optimized.request) %>
                    </td>
                  </tr>
                  <tr>
                    <td>Response</td>
                    <td id="response-optimized">
                      <%= @prettyMs(@report.desktop.optimized.response) %>
                    </td>
                  </tr>
                  <tr>
                    <td>Processing</td>
                    <td id="response-optimized">
                      <%= @prettyMs(@report.desktop.optimized.processing) %>
                    </td>
                  </tr>
                  <tr>
                    <td>Load Time</td>
                    <td id="fullTimeLoad-optimized">
                      <%= @prettyMs(@report.desktop.optimized.loadTime) %>
                    </td>
                  </tr>
                  <tr>
                    <td>Page Size</td>
                    <td id="optimizePageSize">
                      <%= @prettyBytes(@report.desktop.optimized.downloadedBytes) %>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="screenshot">
              <img src="/screenshots/<%= @report.identifier %>-optimized.jpeg">
            </div>
          </div>
        </div>
      <% else :%>
        <div class="loading-icon">
          <img src="<%= @__asset('img/loading.gif') %>">
        </div>
        <div id="progress">
          <% for message in @report.progress :%>
            <div class="progress-message"><%= message %></div>
          <% end %>
        </div>
      <% end %>
    </div>
    <% if @__asset('report.js') :%>
      <script src="<%= @__asset('report.js') %>" defer></script>
    <% end %>
    <script>
      <!--
      var REPORT = <%- JSON.stringify(@report) %>;
      -->
    </script>
  </body>
</html>
